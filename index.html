<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Market-CR</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-info px-4">
  <a class="navbar-brand fw-bold" href="#">Market-CR</a>
  <form class="d-flex ms-auto w-50">
    <input class="form-control me-2" type="search" placeholder="Buscar productos..." aria-label="Search" />
    <button class="btn btn-outline-dark" type="submit">Buscar</button>
  </form>
  <button class="btn btn-outline-light position-relative ms-3" data-bs-toggle="modal" data-bs-target="#cartModal">
    ðŸ›’ Carrito
    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-count">0</span>
  </button>
</nav>

<!-- Carrusel -->
<div id="carouselExample" class="carousel slide my-4 container" data-bs-ride="carousel">
  <div class="carousel-inner rounded" id="carousel-inner"></div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- Productos -->
<div class="container">
  <h2 class="mb-4">Productos</h2>
  <div class="row row-cols-1 row-cols-md-3 g-4" id="product-list"></div>
</div>

<!-- Modal del carrito -->
<div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cartModalLabel">Carrito de compras</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <ul class="list-group mb-3" id="cart-items"></ul>
        <h5 class="text-end">Total: â‚¡<span id="cart-total">0</span></h5>
        <div class="text-end mt-3">
          <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#checkoutModal">Confirmar compra</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para confirmar compra -->
<div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="checkout-form">
        <div class="modal-header">
          <h5 class="modal-title" id="checkoutModalLabel">Confirmar compra</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" class="form-control" id="nombre" required />
          </div>
          <div class="mb-3">
            <label for="telefono" class="form-label">TelÃ©fono</label>
            <input type="tel" class="form-control" id="telefono" pattern="[0-9]{8}" required />
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Enviar pedido</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="bg-dark text-white text-center mt-5 p-4">
  <p class="mb-0">Â© 2025 Market-CR</p>
</footer>

<style>
.carousel-inner {
  text-align: center; /* Centra la imagen horizontalmente */
}

.carousel-inner img {
  max-height: 300px;     /* Ajusta a tu preferencia */
  width: 50;
  height: auto;
  display: inline-block;
}
</style>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const products = [
    { name: "Guantes de boxeo negros de medio dedo para adultos de calidad profesional", price: 8500, images: 3 },
    { name: "Manga refrescantes para brazos", price: 4500, images: 3 },
    { name: "Masajeador de cuello de soporte cervical", price: 10500, images: 3 },
    { name: "Hombrera de compresiÃ³n", price: 6000, images: 3 },
    { name: "MuÃ±equera para el sÃ­ndrome del tÃºnel carpiano", price: 3800, images: 3 },
    { name: "Guantes de boxeo premium", price: 9500, images: 1 },
    { name: "Vendaje de compresiÃ³n ajustable para tobillo", price: 4100, images: 3 },
    { name: "Codera ajustable", price: 3900, images: 3 },
    { name: "Rodillera de compresiÃ³n ajustable con funda antideslizante", price: 5000, images: 2 },
    { name: "MuÃ±equera de compresiÃ³n ajustable de poliÃ©ster transpirable", price: 4300, images: 2 },
    { name: "MuÃ±equera ergonÃ³mica negra de fibra", price: 4700, images: 3 }
  ];

  const carouselContainer = document.getElementById("carousel-inner");
  const productList = document.getElementById("product-list");
  const cartItems = document.getElementById("cart-items");
  const cartTotal = document.getElementById("cart-total");
  const cartCount = document.getElementById("cart-count");

  let cart = [];

  // Cargar imÃ¡genes al carrusel
  let isFirst = true;
  products.forEach(product => {
    const folder = encodeURIComponent(product.name);
    for (let i = 1; i <= product.images; i++) {
      const div = document.createElement("div");
      div.className = `carousel-item${isFirst ? ' active' : ''}`;
      isFirst = false;
      div.innerHTML = `<img src="img/${folder}/${i}.png" class="d-block w-100" alt="${product.name} ${i}" />`;
      carouselContainer.appendChild(div);
    }
  });

  // Renderizar productos
  products.forEach(product => {
    const folder = encodeURIComponent(product.name);
    const card = document.createElement("div");
    card.className = "col";
    card.innerHTML = `
      <div class="card h-100">
        <img src="img/${folder}/1.png" class="card-img-top" alt="${product.name}">
        <div class="card-body">
          <h5 class="card-title">${product.name}</h5>
          <p class="card-text">â‚¡${product.price.toLocaleString()}</p>
          <p class="text-muted small">Cantidad disponible: ${product.images}</p>
          <button class="btn btn-success w-100" onclick='addToCart(${JSON.stringify(product)})'>Agregar al carrito</button>
        </div>
      </div>
    `;
    productList.appendChild(card);
  });

  function addToCart(product) {
    const existing = cart.find(p => p.name === product.name);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ ...product, quantity: 1 });
    }
    updateCartUI();
  }

  function removeFromCart(name) {
    cart = cart.filter(p => p.name !== name);
    updateCartUI();
  }

  function updateCartUI() {
    cartItems.innerHTML = "";
    let total = 0;
    let count = 0;

    cart.forEach(p => {
      total += p.price * p.quantity;
      count += p.quantity;
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.innerHTML = `
        <div>
          <h6 class="my-0">${p.name}</h6>
          <small class="text-muted">Cantidad: ${p.quantity}</small>
        </div>
        <div>
          <span>â‚¡${(p.price * p.quantity).toLocaleString()}</span>
          <button class="btn btn-sm btn-danger ms-2" onclick="removeFromCart('${p.name}')">âœ•</button>
        </div>
      `;
      cartItems.appendChild(li);
    });

    cartTotal.textContent = total.toLocaleString();
    cartCount.textContent = count;
  }

  // Confirmar compra
  document.getElementById("checkout-form").addEventListener("submit", function (e) {
    e.preventDefault();
    const nombre = document.getElementById("nombre").value.trim();
    const telefono = document.getElementById("telefono").value.trim();

    if (!nombre || !telefono) return alert("Por favor complete todos los campos");

    // AquÃ­ podrÃ­as enviar a Google Sheets si deseas

    alert("Â¡Pedido enviado con Ã©xito!");

    cart = [];
    updateCartUI();
    document.getElementById("checkout-form").reset();
    const modal = bootstrap.Modal.getInstance(document.getElementById("checkoutModal"));
    modal.hide();
  });
</script>
</body>
</html>
